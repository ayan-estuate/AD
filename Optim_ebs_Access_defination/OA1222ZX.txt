CREATE AD A4SOAE.ADZX1222
  DESC //'ZX Access Definition R12.2.2'// 
  SRCQUAL PSTAPP.PSTARCH START OPTEBS_ZX_CANDIDATES ADDTBLS N MODCRIT N ADCHGS N USENEW N USEFM N PNSSTATE N SOLUTION 0 
  VAR (ARCH_ID PRMPT //'Enter Archive ID'// )
  TABLE (OPTEBS_ZX_CANDIDATES ACCESS SUID REF N DAA N UR N PREDOP A VARDELIM : COLFLAG N 
    EXTRROWID N )
  TABLE (ZX.ZX_LINES ACCESS SUID REF N DAA Y UR N PREDOP A VARDELIM : COLFLAG N 
    EXTRROWID N )
  TABLE (ZX.ZX_LINES_DET_FACTORS ACCESS SUID REF N DAA Y UR N PREDOP A VARDELIM : COLFLAG N 
    EXTRROWID N )
  TABLE (ZX.ZX_LINES_SUMMARY ACCESS SUID REF N DAA Y UR N PREDOP A VARDELIM : COLFLAG N 
    EXTRROWID N )
  TABLE (ZX.ZX_REC_NREC_DIST ACCESS SUID REF N DAA Y UR N PREDOP A VARDELIM : COLFLAG N 
    EXTRROWID N )
  TABLE (ZX.ZX_TRX_LINE_APP_REGIMES ACCESS SUID REF N DAA Y UR N PREDOP A VARDELIM : COLFLAG N 
    EXTRROWID N )
 REL (//'REL1'// 
    STATUS K USAGE S Q1 Y Q2 N LIMIT 0 TYPE PST 
    PAR OPTEBS_ZX_CANDIDATES PAR_ACCESS D PAR_KEYLIMIT 1 CHI ZX.ZX_LINES CHI_ACCESS D CHI_KEYLIMIT 1 )
  REL (//'OPT_ZX_LI_ZX_TR_LI_APP_REG'// 
    STATUS K USAGE S Q1 Y Q2 N LIMIT 0 TYPE PST 
    PAR ZX.ZX_LINES PAR_ACCESS D PAR_KEYLIMIT 1 CHI ZX.ZX_TRX_LINE_APP_REGIMES CHI_ACCESS D CHI_KEYLIMIT 1 )
  REL (//'OPT_ZX_REC_NREC_DIST_ID'// 
    STATUS K USAGE S Q1 Y Q2 N LIMIT 0 TYPE PST 
    PAR ZX.ZX_LINES PAR_ACCESS D PAR_KEYLIMIT 1 CHI ZX.ZX_REC_NREC_DIST CHI_ACCESS D CHI_KEYLIMIT 1 )
  REL (//'OPT_ZX_LINES_SUMMARY'// 
    STATUS K USAGE S Q1 Y Q2 N LIMIT 0 TYPE PST 
    PAR ZX.ZX_LINES PAR_ACCESS D PAR_KEYLIMIT 1 CHI ZX.ZX_LINES_SUMMARY CHI_ACCESS D CHI_KEYLIMIT 1 )
  REL (//'OPT_ZX_LINES_DET_FACTORS'// 
    STATUS K USAGE S Q1 Y Q2 N LIMIT 0 TYPE PST 
    PAR ZX.ZX_LINES PAR_ACCESS D PAR_KEYLIMIT 1 CHI ZX.ZX_LINES_DET_FACTORS CHI_ACCESS D CHI_KEYLIMIT 1 )
 ARCHACTS (ACTION SEP DBALIAS PSTAPP SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX"
"',:OPTIM_ACTION,:OPTIM_ARCHIVE_GUID,'ARCH',NULL,NULL,0,0,$ARCH_ID,NULL,:OPTIM_SERVER_NAME)"// 
     ADVAR $),
   ARCHACTS (ACTION EEP DBALIAS PSTAPP SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX"
"',:OPTIM_ACTION,:OPTIM_ARCHIVE_GUID,"
" 'ARCH',:OPTIM_ARCHIVE_FILE_NAME,NULL,:OPTIM_TOTAL_ROWS_EXTRACTED,0,$ARCH_ID,:OP"
'TIM_PROCESS_STATUS)'//  ADVAR $),
   ARCHACTS (ACTION SDP DBALIAS PSTAPP SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX"
"',:OPTIM_ACTION,:OPTIM_ARCHIVE_GUID,'ARCH',:OPTIM_ARCHIVE_FILE_NAME,NULL,:OPTIM_"
'TOTAL_ROWS_PROCESSED,:OPTIM_TOTAL_ROWS_IN_ERROR,0,:OPTIM_TOTAL_PROCESS_STATUS)'// 
   ),
   ARCHACTS (ACTION EDP DBALIAS PSTAPP SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX"
"',:OPTIM_ACTION,:OPTIM_ARCHIVE_GUID,'ARCH',:OPTIM_ARCHIVE_FILE_NAME,NULL,:OPTIM_"
'TOTAL_ROWS_PROCESSED,:OPTIM_TOTAL_ROWS_IN_ERROR,0,:OPTIM_TOTAL_PROCESS_STATUS)'// 
   ),
   ARCHACTS (ACTION ERP DBALIAS PSTARC SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX"
"',:OPTIM_ACTION,NULL,'ATA',:OPTIM_ARCHIVE_FILE_NAME,NULL,:OPTIM_TOTAL_ROWS_PROCE"
'SSED,:OPTIM_TOTAL_ROWS_IN_ERROR,0,:OPTIM_TOTAL_PROCESS_STATUS)'// 
     ADVAR $),
   ARCHACTS (ACTION SRP DBALIAS PSTARC SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX"
"',:OPTIM_ACTION,:OPTIM_ARCHIVE_GUID,'ATA',NULL,NULL,0,0,0,NULL)"// 
     ADVAR $)
  ;

CREATE ARCH A4SOAE.ARZX1222
  DESC //'ZX Archive Request R12.2.2'// 
  AF //'ARZX1222<$SEQ4>.AF'// AFX //'ARZX1222<$SEQ4>.AFX'// ROWLIMIT 0 DBCONNECTIONS 1 DELDBCONNECTIONS 1 DEFER_DAA Y REVIEW_DELETE N DELCF N COMPRESSFILE Y 
  COMPRESSINDEXFILE Y COMPRESSMODEL 1 COMPRESSACTIVE N ENCRYPTAF N ENCRYPTIDX N GENSTATISTIC N PROCESS_FILEATTACH Y CREATEREPORT N AD A4SOAE.ADZX1222 
  INCLPK N INCLFK N INCLIDX N INCLALIAS N INCLASSEMBLY N INCLFUNCTION N INCLPACKAGE N INCLPAR_FUNCTION N INCLPAR_SCHEME N INCLPROCEDURE N INCLSEQUENCE N 
  INCLTRIGGER N INCLVIEW N INCLDEF N INCLRULE N INCLUDT N INCLMETHOD N PNSOVERRIDE N PNSOPT N 
  CF //'CFCHR1213<$SEQ4>.CF'// DISCARDLIMIT 0 COMMITFREQ 0 LOCKTBLS N INCLUDE_LOBS Y COMPARE_BEFORE_DELETE Y GENDELSTATISTIC Y DELBYROWID N 
  DELROWIDTHREPER 50 DELROWIDTHREOPT S ALWAYSPROMPT Y OBJQUAL PSTAPP.ZX IGNOREUNKNOWN N
  DELETESTRATEGY (
    TABLE (PSTAPP.ZX.ZX_LINES D 1)
    TABLE (PSTAPP.ZX.ZX_LINES_DET_FACTORS D 1)
    TABLE (PSTAPP.ZX.ZX_LINES_SUMMARY D 1)
    TABLE (PSTAPP.ZX.ZX_REC_NREC_DIST D 1)
	TABLE (PSTAPP.ZX.ZX_TRX_LINE_APP_REGIMES D 1)
  );

CREATE DEL A4SOAE.DRZX1222
  DESC //'ZX Delete Request R12.2.2'// 
  XF //'ARZX12220013.AF'// CF //'CFZX1222<$SEQ4>.CF'// 
  DISCARDLIMIT 0 COMMITFREQ 2000 DBCONNECTIONS 1 LOCKTBLS N REVIEWLIST N DELCF N ARCHIVEFILE Y INCLUDE_LOBS Y COMPARE_BEFORE_DELETE Y VERIFYCOLSEXIST N 
  GENERATE_STATISTICS N 
  STRATEGY (
    TABLE (PSTAPP.ZX.ZX_LINES D 1)
    TABLE (PSTAPP.ZX.ZX_LINES_DET_FACTORS D 1)
    TABLE (PSTAPP.ZX.ZX_LINES_SUMMARY D 1)
    TABLE (PSTAPP.ZX.ZX_REC_NREC_DIST D 1)
	TABLE (PSTAPP.ZX.ZX_TRX_LINE_APP_REGIMES D 1)
  )DELBYROWID N SHOWDELBYROWIDPAGE N DELROWIDTHREPER 50 DELROWIDTHREOPT S ;

CREATE UPIN A4SOAE.IRZX1222
  DESC //'ZX Insert Request R12.2.2'// 
  XF //'ARZX12220013.AF'// CF //'CFZX1222<$SEQ4>.CF'// 
  TM A4SOAE.TMZX1222
  DISCARDLIMIT 0 COMMITFREQ 2000 FORCEEDITTM N LOCKTBLS N UPDINS U DELETEROWS N ALWAYSCALLCREATE N TRIGMODE N CONSMODE N SHOWCURRENCY N SHOWAGE N DELCF N 
    PROCESS_FILEATTACH Y 
  FUNCTION_AGING (
    AGETYPE NONE MULTIPLE 1 CALENDAR SAMPLE_US PIVOT 30 INVALIDDATES N SKIPPEDDATES N 
  )
  GLOBAL_AGING (
    AGETYPE NONE MULTIPLE 1 CALENDAR SAMPLE_US PIVOT 30 INVALIDDATES N SKIPPEDDATES N 
  )
  REPORT_OPTION (
    RPTERROR F RPTSUMMARY F RPTINVALID F RPTSKIPPED F 
  )
  CURRENCY_OPTION (
    DEFAULT SAMPLE 
  )
  TBL (ZX_LINES DELETEROWS N UPDINS Y)
  TBL (ZX_LINES_DET_FACTORS DELETEROWS N UPDINS Y)
  TBL (ZX_LINES_SUMMARY DELETEROWS N UPDINS Y)
  TBL (ZX_REC_NREC_DIST DELETEROWS N UPDINS Y)
  TBL (ZX_TRX_LINE_APP_REGIMES DELETEROWS N UPDINS Y)
  ;

CREATE PK PSTAPP.ZX.ZX_LINES
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (TAX_LINE_ID);

CREATE PK PSTAPP.ZX.ZX_LINES_DET_FACTORS
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (APPLICATION_ID, EVENT_CLASS_CODE, ENTITY_CODE, TRX_ID, TRX_LINE_ID, TRX_LEVEL_TYPE, ICX_SESSION_ID);

CREATE PK PSTAPP.ZX.ZX_LINES_SUMMARY
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (SUMMARY_TAX_LINE_ID);

CREATE PK PSTAPP.ZX.ZX_REC_NREC_DIST
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (REC_NREC_TAX_DIST_ID);

CREATE PK PSTAPP.ZX.ZX_TRX_LINE_APP_REGIMES
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (EVENT_CLASS_CODE, APPLICATION_ID, ENTITY_CODE, TRX_ID, TRX_LINE_ID, TRX_LEVEL_TYPE, TAX_REGIME_CODE);

CREATE PK PSTARC.PSTARCHDATA.ZX_LINES
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (TAX_LINE_ID);

CREATE PK PSTARC.PSTARCHDATA.ZX_LINES_DET_FACTORS
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (APPLICATION_ID, EVENT_CLASS_CODE, ENTITY_CODE, TRX_ID, TRX_LINE_ID, TRX_LEVEL_TYPE, ICX_SESSION_ID);

CREATE PK PSTARC.PSTARCHDATA.ZX_LINES_SUMMARY
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (SUMMARY_TAX_LINE_ID);

CREATE PK PSTARC.PSTARCHDATA.ZX_REC_NREC_DIST
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (REC_NREC_TAX_DIST_ID);
  
CREATE PK PSTARC.PSTARCHDATA.ZX_TRX_LINE_APP_REGIMES
  DESC //'ZX Primary Key R12.2.2'// 
  COLS (EVENT_CLASS_CODE, APPLICATION_ID, ENTITY_CODE, TRX_ID, TRX_LINE_ID, TRX_LEVEL_TYPE, TAX_REGIME_CODE);

CREATE REL OPT_ZX_LINES_DET_FACTORS
  DESC //'ZX Relationship R12.2.2'// 
  CHI PSTAPP.ZX.ZX_LINES_DET_FACTORS
  PAR PSTAPP.ZX.ZX_LINES
  (APPLICATION_ID = APPLICATION_ID,
   ENTITY_CODE = ENTITY_CODE,
   EVENT_CLASS_CODE = EVENT_CLASS_CODE,
   TRX_ID = TRX_ID);

CREATE REL OPT_ZX_LINES_SUMMARY
  DESC //'ZX Relationship R12.2.2'// 
  CHI PSTAPP.ZX.ZX_LINES_SUMMARY
  PAR PSTAPP.ZX.ZX_LINES
  (APPLICATION_ID = APPLICATION_ID,
   ENTITY_CODE = ENTITY_CODE,
   EVENT_CLASS_CODE = EVENT_CLASS_CODE,
   TRX_ID = TRX_ID);

 CREATE REL REL1
  DESC //'ZX Relationship R12.2.2'// 
  CHI PSTAPP.ZX.ZX_LINES
  PAR PSTAPP.PSTARCH.OPTEBS_ZX_CANDIDATES
  (ID = TRX_ID,
   ATTRIBUTE1 = APPLICATION_ID);
   
CREATE REL OPT_ZX_REC_NREC_DIST_ID
  DESC //'ZX Relationship R12.2.2'// 
  CHI PSTAPP.ZX.ZX_REC_NREC_DIST
  PAR PSTAPP.ZX.ZX_LINES
  (APPLICATION_ID = APPLICATION_ID,
   ENTITY_CODE = ENTITY_CODE,
   EVENT_CLASS_CODE = EVENT_CLASS_CODE,
   TRX_ID = TRX_ID);

CREATE REL OPT_ZX_LI_ZX_TR_LI_APP_REG
  DESC //'ZX Relationship R12.2.2'// 
  CHI PSTAPP.ZX.ZX_TRX_LINE_APP_REGIMES
  PAR PSTAPP.ZX.ZX_LINES
  (APPLICATION_ID = APPLICATION_ID,
   ENTITY_CODE = ENTITY_CODE,
   EVENT_CLASS_CODE = EVENT_CLASS_CODE,
   TRX_ID = TRX_ID);

CREATE REST A4SOAE.RRZX1222
  DESC //'ZX Restore Request R12.2.2'// 
  ACTION INSERT SELECTION_MODE DATAMODEL DELETE_XFFILES N AUTO_GEN N CONTINUE_ON_ERROR N COMPRESSFILE Y 
  FILE (//'ARZX12220013.AF'// PNSSTATE N 
    SELCRIT_USE N )
  PARM (DEF A4SOAE.IRZX1222 );

CREATE TM A4SOAE.TMZX1222
  DESC //'ZX Table Map R12.2.2'// 
  SRCQUAL PSTAPP.ZX DESTQUAL PSTARC.PSTARCHDATA SRCAD A4SOAE.ADZX1222 SRCTYPE A
  DESTDB DESTTYPE D VALRULES M UNUSEDOBJ N  SOLUTION 0 
  (ZX.ZX_LINES = ZX_LINES,
   ZX.ZX_LINES_DET_FACTORS = ZX_LINES_DET_FACTORS,
   ZX.ZX_LINES_SUMMARY = ZX_LINES_SUMMARY,
   ZX.ZX_REC_NREC_DIST = ZX_REC_NREC_DIST,
   ZX.ZX_TRX_LINE_APP_REGIMES = ZX_TRX_LINE_APP_REGIMES)
;

CREATE TM A4SOAE.TMZX1222P
  DESC //'ZX Table Map R12.2.2'// 
  SRCQUAL PSTAPP.ZX DESTQUAL PSTAPP.ZX SRCAD A4SOAE.ADZX1222 SRCTYPE A
  DESTDB DESTTYPE D VALRULES M UNUSEDOBJ N  SOLUTION 0 
  (ZX.ZX_LINES = ZX_LINES,
   ZX.ZX_LINES_DET_FACTORS = ZX_LINES_DET_FACTORS,
   ZX.ZX_LINES_SUMMARY = ZX_LINES_SUMMARY,
   ZX.ZX_REC_NREC_DIST = ZX_REC_NREC_DIST,
   ZX.ZX_TRX_LINE_APP_REGIMES = ZX_TRX_LINE_APP_REGIMES)
ARCHACTS (ACTION ERP DBALIAS PSTAPP SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX',:OPTIM_ACTION,NULL,'ATA',:OPTIM_ARCHIVE_FILE_NAME,NULL,:OPTIM_TOTAL_ROWS_PROCES"
'SED,:OPTIM_TOTAL_ROWS_IN_ERROR, 0,:OPTIM_TOTAL_PROCESS_STATUS)'//  ADVAR &),
   ARCHACTS (ACTION SRP DBALIAS PSTAPP SQL //"OPTEBS_A4S_PKG.A4S_PROCESS_UPDATE('ZX',:OPTIM_ACTION,:OPTIM_ARCHIVE_GUID,'ATA',NULL,NULL,0,0,0,NULL)"//  ADVAR $
   )
;
